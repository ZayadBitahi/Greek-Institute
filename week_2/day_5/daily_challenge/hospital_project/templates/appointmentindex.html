{% extends "base.html" %}
{% block title %}Appointments{% endblock %}
{% block content %}
<div class="bg-white shadow-md rounded p-6 mb-6">
  <form method="GET" action="/appointment" class="grid grid-cols-1 md:grid-cols-5 gap-3 items-end">
    <div class="md:col-span-2">
      <label class="block text-sm text-gray-600 mb-1">Search</label>
      <input type="text" name="q" value="{{ q }}" placeholder="Patient, doctor, reason" class="w-full border rounded px-3 py-2">
    </div>
    <div>
      <label class="block text-sm text-gray-600 mb-1">Start</label>
      <input type="datetime-local" name="start" value="{{ start }}" class="w-full border rounded px-3 py-2">
    </div>
    <div>
      <label class="block text-sm text-gray-600 mb-1">End</label>
      <input type="datetime-local" name="end" value="{{ end }}" class="w-full border rounded px-3 py-2">
    </div>
    <div class="flex gap-2">
      <button class="bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700 transition">Filter</button>
      <a href="/appointment/create" class="bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700 transition">Add Appointment</a>
    </div>
  </form>
</div>

<div class="bg-white shadow-md rounded p-6">
  <div class="overflow-x-auto">
    <table class="min-w-full border border-gray-300 rounded overflow-hidden">
      <thead class="bg-green-100">
        <tr>
          <th class="py-2 px-4 border-b text-left">ID</th>
          <th class="py-2 px-4 border-b text-left">Patient</th>
          <th class="py-2 px-4 border-b text-left">Doctor</th>
          <th class="py-2 px-4 border-b text-left">Date/Time</th>
          <th class="py-2 px-4 border-b text-left">Reason</th>
          <th class="py-2 px-4 border-b text-center">Actions</th>
        </tr>
      </thead>
      <tbody>
        {% for a in appointments %}
        <tr class="border-b hover:bg-green-50">
          <td class="py-2 px-4">{{ a[0] }}</td>
          <td class="py-2 px-4">{{ a[1] }}</td>
          <td class="py-2 px-4">{{ a[2] }}</td>
          <td class="py-2 px-4">{{ a[3] }}</td>
          <td class="py-2 px-4">{{ a[4] }}</td>
          <td class="py-2 px-4 text-center">
            <a href="/appointment/edit/{{ a[0] }}" class="bg-yellow-400 text-white px-3 py-1 rounded hover:bg-yellow-500 transition">Edit</a>
            <a href="/appointment/delete/{{ a[0] }}" class="bg-red-500 text-white px-3 py-1 rounded hover:bg-red-600 transition">Delete</a>
          </td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
</div>
{% endblock %}

