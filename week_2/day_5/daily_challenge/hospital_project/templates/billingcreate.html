{% extends "base.html" %}
{% block title %}Add Bill{% endblock %}
{% block content %}
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/tom-select/dist/css/tom-select.css">
<div class="bg-white shadow-md rounded p-6 max-w-2xl mx-auto">
  <h2 class="text-2xl font-semibold text-gray-800 mb-4">Add Bill</h2>
  <form action="/billing/create" method="POST" class="space-y-4">
    <div>
      <label class="block mb-1 text-gray-700">Patient</label>
      <select id="patient_id" name="patient_id" class="w-full border rounded px-3 py-2" required>
        <option value="" disabled selected>Select patient</option>
        {% for p in patients %}
        <option value="{{ p[0] }}">{{ p[1] }} {{ p[2] }} (ID {{ p[0] }})</option>
        {% endfor %}
      </select>
    </div>
    <div>
      <label class="block mb-1 text-gray-700">Amount</label>
      <input type="number" name="amount" step="0.01" class="w-full border rounded px-3 py-2" required>
    </div>
    <div>
      <label class="block mb-1 text-gray-700">Billing Date</label>
      <input type="date" name="billing_date" class="w-full border rounded px-3 py-2" required>
    </div>
    <div class="flex items-center gap-2">
      <input type="checkbox" id="paid_status" name="paid_status" class="w-4 h-4">
      <label for="paid_status" class="text-gray-700">Paid</label>
    </div>
    <div class="flex justify-end gap-3 pt-2">
      <a href="/billing" class="bg-gray-400 text-white px-4 py-2 rounded hover:bg-gray-500 transition">Cancel</a>
      <button type="submit" class="bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700 transition">Create</button>
    </div>
  </form>
</div>
<script src="https://cdn.jsdelivr.net/npm/tom-select/dist/js/tom-select.complete.min.js"></script>
<script>
new TomSelect('#patient_id',{create:false,sortField:{field:'text',direction:'asc'},placeholder:'Search patient...'});
</script>
{% endblock %}

