{% extends "base.html" %}

{% block title %}Patients{% endblock %}

{% block content %}
<form method="GET" action="/patients" class="flex flex-col md:flex-row gap-4 mb-6 items-center">
  <input type="text" name="search" value="{{ search }}" placeholder="Search patients..." class="border rounded px-3 py-2 flex-1">
  <button type="submit" class="bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700 transition">Search</button>
</form>

<div class="bg-white shadow-md rounded p-6">
  <table class="min-w-full border border-gray-300 rounded overflow-hidden">
    <thead class="bg-green-100">
      <tr>
        <th class="py-2 px-4 border-b">ID</th>
        <th class="py-2 px-4 border-b">First Name</th>
        <th class="py-2 px-4 border-b">Last Name</th>
        <th class="py-2 px-4 border-b">DOB</th>
        <th class="py-2 px-4 border-b">Gender</th>
        <th class="py-2 px-4 border-b">Contact</th>
        <th class="py-2 px-4 border-b">Actions</th>
      </tr>
    </thead>
    <tbody>
      {% for patient in patients %}
      <tr class="text-center border-b hover:bg-green-50">
        <td class="py-2 px-4">{{ patient[0] }}</td>
        <td class="py-2 px-4">{{ patient[1] }}</td>
        <td class="py-2 px-4">{{ patient[2] }}</td>
        <td class="py-2 px-4">{{ patient[3] }}</td>
        <td class="py-2 px-4">{{ patient[4] }}</td>
        <td class="py-2 px-4">{{ patient[5] }}</td>
        <td class="py-2 px-4 flex justify-center gap-2">
          <a href="/patient/edit/{{ patient[0] }}" class="bg-yellow-400 text-white px-2 py-1 rounded hover:bg-yellow-500 transition">Edit</a>
          <a href="/patient/delete/{{ patient[0] }}" class="bg-red-500 text-white px-2 py-1 rounded hover:bg-red-600 transition">Delete</a>
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>

  <div class="flex justify-center gap-2 mt-4">
    {% if page > 1 %}
    <a href="/patients?page={{ page - 1 }}&search={{ search }}" class="bg-gray-300 px-3 py-1 rounded hover:bg-gray-400 transition">Prev</a>
    {% endif %}
    <span class="px-3 py-1">{{ page }} / {{ total_pages }}</span>
    {% if page < total_pages %}
    <a href="/patients?page={{ page + 1 }}&search={{ search }}" class="bg-gray-300 px-3 py-1 rounded hover:bg-gray-400 transition">Next</a>
    {% endif %}
  </div>
</div>
{% endblock %}

