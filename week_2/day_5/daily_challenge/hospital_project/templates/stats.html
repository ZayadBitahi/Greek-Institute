{% extends "base.html" %}
{% block title %}Stats{% endblock %}
{% block content %}
<h2 class="text-2xl font-semibold text-gray-800 mb-6">Hospital Statistics</h2>

<div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 mb-6">
  <div class="bg-white shadow-md rounded p-6 text-center">
    <div class="text-sm text-gray-500 mb-2">Patients</div>
    <div class="text-4xl font-bold text-green-700">{{ total_patients|default(0) }}</div>
  </div>
  <div class="bg-white shadow-md rounded p-6 text-center">
    <div class="text-sm text-gray-500 mb-2">Doctors</div>
    <div class="text-4xl font-bold text-green-700">{{ total_doctors|default(0) }}</div>
  </div>
  <div class="bg-white shadow-md rounded p-6 text-center">
    <div class="text-sm text-gray-500 mb-2">Departments</div>
    <div class="text-4xl font-bold text-green-700">{{ total_departments|default(0) }}</div>
  </div>
  <div class="bg-white shadow-md rounded p-6 text-center">
    <div class="text-sm text-gray-500 mb-2">Appointments</div>
    <div class="text-4xl font-bold text-green-700">{{ total_appointments|default(0) }}</div>
  </div>
</div>

<div class="bg-white shadow-md rounded p-6">
  <canvas id="hospitalChart" height="120"></canvas>
</div>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
const ctx = document.getElementById('hospitalChart').getContext('2d');
new Chart(ctx, {
  type: 'bar',
  data: {
    labels: ['Patients', 'Doctors', 'Departments', 'Appointments'],
    datasets: [{
      label: 'Counts',
      data: [
        {{ total_patients|default(0) }},
        {{ total_doctors|default(0) }},
        {{ total_departments|default(0) }},
        {{ total_appointments|default(0) }}
      ],
      backgroundColor: ['#16a34a','#22c55e','#86efac','#4ade80']
    }]
  },
  options: {
    responsive: true,
    plugins: { legend: { display: false } },
    scales: {
      y: { beginAtZero: true, ticks: { precision:0 } }
    }
  }
});
</script>
{% endblock %}
